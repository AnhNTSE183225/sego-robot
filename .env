# Kafka settings
ROBOT_ID=a8a0b59d-2673-4b1a-afc4-79f341327e4a
KAFKA_BOOTSTRAP_SERVERS=172.20.10.3:9092
KAFKA_TOPIC_COMMAND=robot.cmd
KAFKA_TOPIC_TELEMETRY=robot.telemetry
KAFKA_TOPIC_MAP=robot.map
KAFKA_TOPIC_EVENTS=robot.events

# Logging
ROBOT_LOG_FILE=robot.log
ROBOT_LOG_LEVEL=DEBUG

export ROBOT_ID=b4879ccf-75f0-4276-8c02-ac33f60aeb25
export KAFKA_BOOTSTRAP_SERVERS=172.20.10.3:9092
export KAFKA_TOPIC_COMMAND=robot.cmd
export KAFKA_TOPIC_TELEMETRY=robot.telemetry
export KAFKA_TOPIC_MAP=robot.map
export KAFKA_TOPIC_EVENTS=robot.events
export ROBOT_LOG_FILE=robot.log
export ROBOT_LOG_LEVEL=DEBUG

python3 odom_only_navigator.py

python3 - <<'PY'
from rplidar import RPLidar
lidar = RPLidar('/dev/ttyUSB0')
try:
    for i, scan in enumerate(lidar.iter_scans()):
        print("sample", i, "len", len(scan), "first item", scan[:1])
        if i >= 2:
            break
finally:
    lidar.stop(); lidar.stop_motor(); lidar.disconnect()
PY